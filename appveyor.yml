version: 0.3.{build}-alpha
image: Visual Studio 2017
dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: "{version}"
  package_version: "{version}"
before_build:
  - choco install "msbuild-sonarqube-runner" -y
  - dotnet restore
  - SonarScanner.MSBuild.exe begin /k:"neural-network-constructor" /d:"sonar.host.url=https://sonarqube.com" /o:"a1essandro-github" /d:"sonar.login=c2e717505450940ed52170d6a57adb92c475af69"
build:
  verbosity: normal
  # publish_nuget: true
after_build:
  - SonarScanner.MSBuild.exe end /d:"sonar.login=c2e717505450940ed52170d6a57adb92c475af69"
  - dotnet pack NeuralNetworkConstructor -v=n /p:Configuration=Release /p:PackageVersion=%APPVEYOR_BUILD_VERSION%
artifacts:
- path: '**\*.nupkg'
  name: NuGet Packages
deploy:
  provider: NuGet
  api_key:
    secure: WMyqg8N2dXtblpP7+rRZmP1i1GnqMrHNEFnGEVqHsCG7O6HWc8fEkKd22Fh5MDx2
  artifact: /.*\.nupkg/
  on:
    #appveor_repo_tag: true
    branch: 0.3